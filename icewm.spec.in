%define name @@PNAME@@
%define ver @@VERSION@@
%define prefix /opt/@@PNAME@@

%define bindir %{prefix}/bin
%define datadir %{prefix}/share/%{name}

Summary: X11 Window Manager
Name: %{name}
Version: %{ver}
Release: 1
Copyright: LGPL
Group: X11/Window Managers
Source: icewm2-%{ver}.src.tar.gz
URL: http://icewm.sourceforge.net/
Packager: Marko Macek <Marko.Macek@gmx.net>
BuildRoot: /tmp/build-icewm-%ver

%description
Window Manager for X Window System. Can emulate the look of Windows'95,
OS/2 Warp 3,4, Motif. Tries to take the best features of the above systems.
Features multiple workspaces, opaque move/resize, task bar, window list,
mailbox status, digital clock. Fast and small.

%prep

%setup

%build
CXXFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%{prefix} --without-gnome-menus
make

%install
make prefix=$RPM_BUILD_ROOT%{prefix} CONFIGDIR=$RPM_BUILD_ROOT/etc/X11/%{name} install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
#%doc README COPYING CHANGES TODO BUGS icewm.lsm FAQ doc/*.html doc/icewm.sgml
%{bindir}/%{name}
%{bindir}/%{name}_hint
%{bindir}/%{name}_bg
%{datadir}

#%config %{datadir}/winoptions

#%{datadir}/themes/nice/icewm.pref
#%{datadir}/themes/nice/close.xpm
#%{datadir}/themes/nice/hide.xpm
#%{datadir}/themes/nice/maximize.xpm
#%{datadir}/themes/nice/menu.xpm
#%{datadir}/themes/nice/minimize.xpm
#%{datadir}/themes/nice/restore.xpm
#%{datadir}/themes/nice/rolldown.xpm
#%{datadir}/themes/nice/rollup.xpm

%package themes

Summary: X11 Window Manager - Extra
Group: X11/Window Managers
Requires: %{name}

%description themes
Themes

%files themes
%{bindir}/%{name}_sound

%package extra

Summary: X11 Window Manager - Extra
Group: X11/Window Managers
Requires: %{name}

%description extra
Extra

%files extra
%{bindir}/%{name}_about
%{bindir}/%{name}_help
%{bindir}/%{name}_root
%{bindir}/%{name}_sysdlg
%{bindir}/%{name}_sound
%{bindir}/%{name}_dock

